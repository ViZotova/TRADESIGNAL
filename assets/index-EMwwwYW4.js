import{o as N,u as T,r as d,C as k,b as w,d as C,j as t,F as R}from"./main-CUM0TpEs.js";import{u as S,C as W}from"./index.esm-bCJaHxzV.js";import{u as A}from"./useWindowWidth-Cy0sMt6n.js";import{M as x}from"./MainButton-CN3kiotW.js";import{I as M}from"./InstructionModal-CSbRkftG.js";import{b as E}from"./bitcoin-PbM30oEE.js";import{b as D}from"./bars-CE7l5pMj.js";import{g as q}from"./index-ByT5oEbe.js";import"./proxy-B9g5KbkS.js";const H="_wrapper_yllvt_1",O="_presentImg_yllvt_13",Q="_title_yllvt_23",F="_description_yllvt_32",z="_registerWarningText_yllvt_41",B="_form_yllvt_59",L="_button_yllvt_69",P="_whereIsId_yllvt_73",J="_bottomQuestions_yllvt_85",$="_questionText_yllvt_93",G="_rightSide_yllvt_104",K="_desktopWrapper_yllvt_150",U="_desktopInstructionModal_yllvt_169",V="_modalCross_yllvt_186",X="_instructionText_yllvt_193",Y="_chartRight_yllvt_202",Z="_bitcoinRight_yllvt_207",s={wrapper:H,presentImg:O,title:Q,description:F,registerWarningText:z,form:B,button:L,whereIsId:P,bottomQuestions:J,questionText:$,rightSide:G,desktopWrapper:K,desktopInstructionModal:U,modalCross:V,instructionText:X,chartRight:Y,bitcoinRight:Z},tt="/assets/present-BfHd7NH3.png",dt=N(()=>{var I;const{t:e}=T("auth"),{store:r}=d.useContext(k),i=w(),o=C(),{register:f,handleSubmit:v,setError:p,formState:{errors:b}}=S(),[m,h]=d.useState(!1),[l,g]=d.useState(null),j=A(),u=a=>{h(!0),g(a)},_=()=>{h(!1),g(null)};d.useEffect(()=>{if(r.isAuth&&r.user.referralId){i(o("/signal"));return}if(!r.isAuth){i(o("/"));return}if(!r.user.isActivated){i(o("/confirm-email"));return}},[r.isAuth,r.user.referralId,r.user.isActivated,i,o]);const y=async a=>{const n=Number(a.id);isNaN(n)&&p("id",{type:"manual",message:e("notARobotError")}),localStorage.setItem("referralId",String(n));const c=await r.setReferralId(n);c?(c.includes("exists")||c.includes("ID")||c.includes("can't"))&&(p("id",{type:"manual",message:c}),localStorage.removeItem("referralId")):(q(n).catch(console.log),i(o("/signal")))};return t.jsxs("div",{className:s.desktopWrapper,children:[t.jsxs("div",{className:s.rightSide,children:[m||t.jsxs("div",{children:[t.jsx("img",{src:E,alt:"bitcoin",className:s.bitcoinRight}),t.jsx("img",{src:D,alt:"chart",className:s.chartRight})]}),m&&t.jsxs("div",{className:s.desktopInstructionModal,children:[l==null?void 0:l.split(`
`).map((a,n)=>t.jsx("p",{className:s.instructionText,children:a},n)),t.jsx(R,{className:s.modalCross,onClick:_})]})]}),t.jsxs("div",{className:s.wrapper,children:[j||t.jsx(M,{onClose:_,isOpen:m,instructionText:l}),t.jsx("img",{src:tt,alt:"present",className:s.presentImg}),t.jsxs("div",{children:[t.jsx("h1",{className:s.title,children:e("almostDone")}),t.jsx("h2",{className:s.description,children:e("almostDoneDescription")})]}),t.jsxs("div",{children:[t.jsx(x,{className:s.button,target:"_blank",category:"link",style:"action",href:"https://u1.shortink.io/register?utm_campaign=799412&utm_source=affiliate&utm_medium=sr&a=gekIJvE0wAmyjn&ac=ukraine&code=WELCOME50",children:e("getRegister")}),t.jsxs("p",{className:s.registerWarningText,children:[t.jsx("span",{children:e("warningWord")})," ",e("registerWarningText")]})]}),t.jsxs("form",{className:s.form,onSubmit:v(y),children:[t.jsx("p",{className:s.whereIsId,onClick:()=>u(e("whereIsId",{ns:"idInstruction"})),children:e("whereIsIdText",{ns:"idInstruction"})}),t.jsx(W,{placeholder:"ID",error:(I=b.id)==null?void 0:I.message,type:"number",...f("id",{required:e("enterId")})}),t.jsx(x,{className:s.button,type:"submit",style:"action",children:e("createAnAccount")})]}),t.jsxs("div",{className:s.bottomQuestions,children:[t.jsx("p",{className:s.questionText,onClick:()=>u(e("idDescription",{ns:"idInstruction"})),children:e("idDescriptionText",{ns:"idInstruction"})}),t.jsx("p",{className:s.questionText,onClick:()=>u(e("alreadyHaveAccount",{ns:"idInstruction"})),children:e("alreadyHaveAccountText",{ns:"idInstruction"})})]})]})]})});export{dt as default};
