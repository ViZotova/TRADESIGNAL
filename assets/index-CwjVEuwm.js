import{j as e,u as N,c as v,a as I,r,C as Y,H as V,o as K,G as X,F as Q,b as tt,d as et,A as nt}from"./main-CUM0TpEs.js";import{u as st}from"./useNoAuthRedirect-DsMISdsL.js";import{S as ot}from"./SectionWrapper-E0lwsLBs.js";import{e as it,C as q,a as z,I as rt}from"./InfiniteLoader-BASK9onZ.js";import{I as at}from"./InstructionModal-CSbRkftG.js";import{M as G}from"./MainButton-CN3kiotW.js";import{a as lt,g as ct}from"./index-D5S_XLeY.js";import"./proxy-B9g5KbkS.js";const dt="_container_pyb3e_1",ht="_sectionContainer_pyb3e_12",ut="_cardTitle_pyb3e_21",mt="_statsContainer_pyb3e_33",j={container:dt,sectionContainer:ht,cardTitle:ut,statsContainer:mt};(function(n,i){i===void 0&&(i={});var s=i.insertAt;if(typeof document<"u"){var t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",s==="top"&&t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}})(`@keyframes ActivityRings-module_RingProgress__MiyKs {
    from {
        stroke-dasharray: 0 999;
    }
}

.ActivityRings-module_innerActivityRing__2Jwbn {
    transform-origin: 50%;
    transform: rotate(-90deg);
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
    animation: ActivityRings-module_RingProgress__MiyKs forwards;
}

.ActivityRings-module_innerActivityRingBackground__lnUfz {
    transform-origin: 50%;
    transform: rotate(-90deg);
    fill: none;
}


`);const pt={containerHeight:"100%",containerWidth:"100%",paddingBetweenRings:.75,initialRadius:30,animationDurationMillis:1e3,animationTimingFunction:"ease-in-out",backgroundOpacity:.4};function ft(n){const i=Object.assign({},pt,n.options),s=n.rings.reduce((l,c)=>{var u;return l+((u=c.ringWidth)!==null&&u!==void 0?u:12)+i.paddingBetweenRings},0),t=2*(i.initialRadius+s),o=n.rings.map((a=0,l=>{var c;return a+=(c=l.ringWidth)!==null&&c!==void 0?c:12}));var a;return e.jsx("svg",Object.assign({viewBox:`0 0 ${t} ${t}`,height:i.containerHeight,width:i.containerWidth},{children:e.jsx("g",{children:n.rings.map((l,c)=>e.jsx(gt,{index:c,ring:l,options:i,summedUpRingWidthsBefore:c===0?0:o[c-1]},c))})}))}function gt(n){var i,s;const t=(i=n.ring.ringWidth)!==null&&i!==void 0?i:12,o=n.options.initialRadius+n.summedUpRingWidthsBefore+t/2+n.index*n.options.paddingBetweenRings,a=Math.min(.999,n.ring.filledPercentage)*(2*o*Math.PI);return e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:"50%",cy:"50%",r:o,stroke:(s=n.ring.backgroundColor)!==null&&s!==void 0?s:n.ring.color,strokeOpacity:n.options.backgroundOpacity,strokeWidth:t,className:"ActivityRings-module_innerActivityRingBackground__lnUfz"}),e.jsx("circle",{cx:"50%",cy:"50%",r:o,strokeDasharray:`${a} ${"9".repeat(n.index+4)}`,stroke:n.ring.color,strokeWidth:t,style:{animationDuration:`${n.options.animationDurationMillis}ms`,animationTimingFunction:n.options.animationTimingFunction},className:"ActivityRings-module_innerActivityRing__2Jwbn"}),e.jsx("foreignObject",Object.assign({x:"50%",y:"50%",width:o/2+"px",height:o/2+"px"},{children:n.ring.icon}))]})}const _t="_statsItem_t8ihl_1",xt="_totalSignalsSection_t8ihl_12",yt="_totalTitle_t8ihl_19",vt="_totalAmount_t8ihl_28",wt="_activityRings_t8ihl_37",St="_statsSignalsSection_t8ihl_43",bt="_statsContainer_t8ihl_53",jt="_dot_t8ihl_60",Ct="_win_t8ihl_66",Tt="_loss_t8ihl_69",Et="_neutral_t8ihl_72",Nt="_text_t8ihl_76",Lt="_statsAmount_t8ihl_84",h={statsItem:_t,totalSignalsSection:xt,totalTitle:yt,totalAmount:vt,activityRings:wt,statsSignalsSection:St,statsContainer:bt,dot:jt,win:Ct,loss:Tt,neutral:Et,text:Nt,statsAmount:Lt},Rt=({values:n})=>{const{t:i}=N("history"),s=[{filledPercentage:n.neutralAmount/n.totalSignals,color:"#5b4a0a"},{filledPercentage:n.loseAmount/n.totalSignals,color:"#c8246d"},{filledPercentage:n.winAmount/n.totalSignals,color:"#4807ea"}];return e.jsxs("div",{className:h.statsItem,children:[e.jsxs("div",{className:h.totalSignalsSection,children:[e.jsxs("div",{children:[e.jsx("h3",{className:h.totalTitle,children:i("stats.cards.total")}),e.jsx("p",{className:h.totalAmount,children:n.totalSignals})]}),e.jsxs("div",{className:h.statsSignalsSection,children:[e.jsxs("div",{className:v(h.statsContainer,h.win),children:[e.jsx("div",{className:h.dot}),e.jsxs("p",{className:h.text,children:[i("stats.cards.win"),":"," ",e.jsx("span",{className:h.statsAmount,children:n.winAmount})]})]}),e.jsxs("div",{className:v(h.statsContainer,h.loss),children:[e.jsx("div",{className:h.dot}),e.jsxs("p",{className:h.text,children:[i("stats.cards.loss"),":"," ",e.jsx("span",{className:h.statsAmount,children:n.loseAmount})]})]}),e.jsxs("div",{className:v(h.statsContainer,h.neutral),children:[e.jsx("div",{className:h.dot}),e.jsxs("p",{className:h.text,children:[i("stats.cards.neutral"),":"," ",e.jsx("span",{className:h.statsAmount,children:n.neutralAmount})]})]})]})]}),e.jsx("div",{className:h.activityRings,children:e.jsx(ft,{rings:s,options:{initialRadius:50,containerHeight:"100px"}})})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var W=function(n,i){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var o in t)t.hasOwnProperty(o)&&(s[o]=t[o])},W(n,i)};function Dt(n,i){W(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}var A=function(){return A=Object.assign||function(i){for(var s,t=1,o=arguments.length;t<o;t++){s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])}return i},A.apply(this,arguments)};function At(n,i,s,t){var o,a=!1,l=0;function c(){o&&clearTimeout(o)}function u(){c(),a=!0}typeof i!="boolean"&&(t=s,s=i,i=void 0);function f(){var d=this,m=Date.now()-l,b=arguments;if(a)return;function w(){l=Date.now(),s.apply(d,b)}function L(){o=void 0}t&&!o&&w(),c(),t===void 0&&m>n?w():i!==!0&&(o=setTimeout(t?L:w,t===void 0?n-m:n))}return f.cancel=u,f}var E={Pixel:"Pixel",Percent:"Percent"},Z={unit:E.Percent,value:.8};function J(n){return typeof n=="number"?{unit:E.Percent,value:n*100}:typeof n=="string"?n.match(/^(\d*(\.\d+)?)px$/)?{unit:E.Pixel,value:parseFloat(n)}:n.match(/^(\d*(\.\d+)?)%$/)?{unit:E.Percent,value:parseFloat(n)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),Z):(console.warn("scrollThreshold should be string or number"),Z)}var kt=function(n){Dt(i,n);function i(s){var t=n.call(this,s)||this;return t.lastScrollTop=0,t.actionTriggered=!1,t.startY=0,t.currentY=0,t.dragging=!1,t.maxPullDownDistance=0,t.getScrollableTarget=function(){return t.props.scrollableTarget instanceof HTMLElement?t.props.scrollableTarget:typeof t.props.scrollableTarget=="string"?document.getElementById(t.props.scrollableTarget):(t.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},t.onStart=function(o){t.lastScrollTop||(t.dragging=!0,o instanceof MouseEvent?t.startY=o.pageY:o instanceof TouchEvent&&(t.startY=o.touches[0].pageY),t.currentY=t.startY,t._infScroll&&(t._infScroll.style.willChange="transform",t._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},t.onMove=function(o){t.dragging&&(o instanceof MouseEvent?t.currentY=o.pageY:o instanceof TouchEvent&&(t.currentY=o.touches[0].pageY),!(t.currentY<t.startY)&&(t.currentY-t.startY>=Number(t.props.pullDownToRefreshThreshold)&&t.setState({pullToRefreshThresholdBreached:!0}),!(t.currentY-t.startY>t.maxPullDownDistance*1.5)&&t._infScroll&&(t._infScroll.style.overflow="visible",t._infScroll.style.transform="translate3d(0px, "+(t.currentY-t.startY)+"px, 0px)")))},t.onEnd=function(){t.startY=0,t.currentY=0,t.dragging=!1,t.state.pullToRefreshThresholdBreached&&(t.props.refreshFunction&&t.props.refreshFunction(),t.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){t._infScroll&&(t._infScroll.style.overflow="auto",t._infScroll.style.transform="none",t._infScroll.style.willChange="unset")})},t.onScrollListener=function(o){typeof t.props.onScroll=="function"&&setTimeout(function(){return t.props.onScroll&&t.props.onScroll(o)},0);var a=t.props.height||t._scrollableNode?o.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!t.actionTriggered){var l=t.props.inverse?t.isElementAtTop(a,t.props.scrollThreshold):t.isElementAtBottom(a,t.props.scrollThreshold);l&&t.props.hasMore&&(t.actionTriggered=!0,t.setState({showLoader:!0}),t.props.next&&t.props.next()),t.lastScrollTop=a.scrollTop}},t.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:s.dataLength},t.throttledOnScrollListener=At(150,t.onScrollListener).bind(t),t.onStart=t.onStart.bind(t),t.onMove=t.onMove.bind(t),t.onEnd=t.onEnd.bind(t),t}return i.prototype.componentDidMount=function(){if(typeof this.props.dataLength>"u")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},i.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},i.prototype.componentDidUpdate=function(s){this.props.dataLength!==s.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},i.getDerivedStateFromProps=function(s,t){var o=s.dataLength!==t.prevDataLength;return o?A(A({},t),{prevDataLength:s.dataLength}):null},i.prototype.isElementAtTop=function(s,t){t===void 0&&(t=.8);var o=s===document.body||s===document.documentElement?window.screen.availHeight:s.clientHeight,a=J(t);return a.unit===E.Pixel?s.scrollTop<=a.value+o-s.scrollHeight+1:s.scrollTop<=a.value/100+o-s.scrollHeight+1},i.prototype.isElementAtBottom=function(s,t){t===void 0&&(t=.8);var o=s===document.body||s===document.documentElement?window.screen.availHeight:s.clientHeight,a=J(t);return a.unit===E.Pixel?s.scrollTop+o>=s.scrollHeight-a.value:s.scrollTop+o>=a.value/100*s.scrollHeight},i.prototype.render=function(){var s=this,t=A({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),o=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),a=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return I.createElement("div",{style:a,className:"infinite-scroll-component__outerdiv"},I.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(l){return s._infScroll=l},style:t},this.props.pullDownToRefresh&&I.createElement("div",{style:{position:"relative"},ref:function(l){return s._pullDown=l}},I.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!o&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},i}(r.Component);const Bt="_historyTable_qtz9g_1",Mt="_tableHead_qtz9g_11",It="_tableBody_qtz9g_33",Ht="_bottomTableText_qtz9g_53",Ot="_noDataRow_qtz9g_68",Ft="_historyTableWrapper_qtz9g_74",Pt="_tableFiltersWrapper_qtz9g_85",Wt="_filtersSelection_qtz9g_100",Yt="_filters_qtz9g_100",$t="_resetButton_qtz9g_110",x={historyTable:Bt,tableHead:Mt,tableBody:It,bottomTableText:Ht,noDataRow:Ot,historyTableWrapper:Ft,tableFiltersWrapper:Pt,filtersSelection:Wt,filters:Yt,resetButton:$t},Ut="_desktopCurrencyTr_mkags_7",qt="_trContainer_mkags_11",zt="_currencySymbol_mkags_18",Gt="_vipSignal_mkags_37",Zt="_vipGradientMove_mkags_1",Jt="_squadSignal_mkags_45",Kt="_rowData_mkags_53",Vt="_result_mkags_62",Xt="_win_mkags_68",Qt="_lose_mkags_72",te="_neutral_mkags_76",ee="_confirmModal_mkags_80",ne="_modalButtonsContainer_mkags_94",se="_mobileCurrencyTr_mkags_113",p={desktopCurrencyTr:Ut,trContainer:qt,currencySymbol:zt,vipSignal:Gt,vipGradientMove:Zt,squadSignal:Jt,rowData:Kt,result:Vt,win:Xt,lose:Qt,neutral:te,confirmModal:ee,modalButtonsContainer:ne,mobileCurrencyTr:se},oe=({signalData:n,isAdmin:i=!1,handleHistoryItemDelete:s})=>{var C,T;const{t}=N("history"),{store:o}=r.useContext(Y),{symbol:a,result:l,duration:c,createdAt:u,_id:f,aiModel:d}=n,[m,b]=r.useState(!1),[w,L]=r.useState(void 0),[k,H]=r.useState(!0),O=r.useRef(null),{date:B,time:M}=it(u),R=()=>b(!0),D=()=>b(!1),S=F=>{const $=F.target.closest(".tr-container");if(!$)return;const U=$.dataset.id;U&&(L(U),R())},g=async()=>{if(w)try{s(),await o.deleteSignal(w),H(!1)}catch(F){console.log(F)}finally{D()}};return e.jsx(e.Fragment,{children:k&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:O,"data-id":f,onClick:i?S:void 0,className:v("tr-container",p.trContainer),children:[e.jsx("tr",{className:p.mobileCurrencyTr,children:e.jsx("td",{colSpan:5,children:e.jsxs("div",{className:p.currencySymbol,children:[e.jsx(q,{symbol:a}),e.jsx("p",{children:a})]})})}),e.jsxs("tr",{className:p.rowData,children:[e.jsx("td",{className:p.desktopCurrencyTr,children:e.jsxs("div",{className:p.currencySymbol,children:[e.jsx(q,{symbol:a}),e.jsx("p",{children:a})]})}),e.jsx("td",{children:B}),e.jsx("td",{children:z(M)}),e.jsx("td",{children:e.jsx("span",{className:v((C=d==null?void 0:d.toLowerCase())!=null&&C.includes("vip")?p.vipSignal:"",(T=d==null?void 0:d.toLowerCase())!=null&&T.includes("13")?p.squadSignal:""),children:d||"-"})}),e.jsxs("td",{children:[c," ",t(`history.tableBody.${c}`)]}),e.jsx("td",{className:v(p.result,p[l.toLowerCase()]),children:l})]})]}),e.jsx(at,{isOpen:m,onClose:D,className:p.confirmModal,children:e.jsxs("div",{className:p.modalWrapper,children:[e.jsx("h2",{children:"Удалить сигнал?"}),e.jsxs("p",{children:["Пара: ",a,e.jsx("br",{}),"Время: ",z(M),e.jsx("br",{}),"Результат: ",l]}),e.jsxs("div",{className:p.modalButtonsContainer,children:[e.jsx(G,{style:"action",onClick:g,children:"Да"}),e.jsx(G,{onClick:D,children:"Нет"})]})]})})]})})},ie="_wrapper_8a8ig_1",re="_button_8a8ig_6",ae="_arrowDown_8a8ig_29",le="_open_8a8ig_38",ce="_selection_8a8ig_53",de="_selectionItem_8a8ig_67",he="_dropdown_8a8ig_83",ue="_container_8a8ig_103",y={wrapper:ie,button:re,arrowDown:ae,open:le,selection:ce,selectionItem:de,dropdown:he,container:ue},me=({title:n,titleId:i,...s},t)=>r.createElement("svg",{width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i,...s},n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M1 1L6 6L11 1",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),pe=r.forwardRef(me),P=({type:n,options:i,selectedFilters:s,selectCallback:t})=>{const{t:o}=N("history"),[a,l]=r.useState(!1),{closeRef:c,openerRef:u}=V({callback:()=>l(!1)});return e.jsxs("div",{className:y.wrapper,children:[e.jsxs("button",{ref:u,className:v(y.button,a&&y.open),onClick:()=>l(!a),children:[e.jsx("span",{className:y.selection,children:s[n]||o(`history.tableHead.${n}`)}),e.jsxs("div",{className:y.arrowDown,children:[" ",e.jsx(pe,{})]})]}),e.jsx("div",{ref:c,className:v(y.dropdown,a&&y.open),children:e.jsx("div",{className:y.container,children:Object.entries([o(`history.tableHead.${n}`),...i]).map(([f,d])=>e.jsx("button",{className:v(y.selectionItem,s[n]===d&&y.active),onClick:()=>{t(n,d===o(`history.tableHead.${n}`)?"":d),l(!1)},children:d},f))})})]})},fe=({title:n,titleId:i,...s},t)=>r.createElement("svg",{width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i,...s},n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M17.0333 2.83499C16.846 2.83483 16.6613 2.87981 16.495 2.96612C16.3287 3.05242 16.1856 3.17752 16.0778 3.33083L14 6.28832L11.9105 3.32849C11.8027 3.17594 11.6599 3.0515 11.494 2.96562C11.3282 2.87974 11.1441 2.83494 10.9573 2.83499L7 2.96562L11.3194 9.74166L14 14L16.7063 9.74166L21 2.83499L17.0333 2.83499Z",fill:"url(#paint0_linear_3305_7117)"}),r.createElement("path",{d:"M8.13867 4.00488L12.3923 4.00722L14.007 6.28922L15.61 4.00722L19.8602 4.00605L14.0268 13.8131L8.13867 4.00488Z",fill:"url(#paint1_linear_3305_7117)"}),r.createElement("g",{filter:"url(#filter0_bii_3305_7117)"},r.createElement("path",{d:"M25.6677 2.84432L20.5531 2.84082L16.4499 9.74165L14.0349 13.825L11.5849 9.74165L7.4479 2.84315L2.32624 2.87115C2.12131 2.87229 1.92029 2.92738 1.74341 3.03089C1.56654 3.1344 1.42006 3.28267 1.3187 3.46079C1.21734 3.6389 1.16469 3.84057 1.16604 4.0455C1.16739 4.25043 1.2227 4.45139 1.3264 4.62815L13.0164 24.584C13.1194 24.7598 13.2667 24.9057 13.4435 25.0069C13.6204 25.1082 13.8207 25.1613 14.0245 25.1611C14.2283 25.1608 14.4285 25.1072 14.6051 25.0056C14.7817 24.9039 14.9287 24.7578 15.0312 24.5817L26.6746 4.59899C26.778 4.42177 26.8328 4.22042 26.8336 4.01524C26.8343 3.81006 26.781 3.60831 26.6788 3.43035C26.5767 3.25238 26.4295 3.1045 26.252 3.00161C26.0744 2.89872 25.8729 2.84446 25.6677 2.84432Z",fill:"white",fillOpacity:.2})),r.createElement("defs",null,r.createElement("filter",{id:"filter0_bii_3305_7117",x:-2.83398,y:-1.15918,width:33.668,height:30.3203,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),r.createElement("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:2}),r.createElement("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_3305_7117"}),r.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_3305_7117",result:"shape"}),r.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dy:-4}),r.createElement("feGaussianBlur",{stdDeviation:2}),r.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),r.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.05 0"}),r.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3305_7117"}),r.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dx:-4,dy:-4}),r.createElement("feGaussianBlur",{stdDeviation:2}),r.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),r.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.05 0"}),r.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_3305_7117",result:"effect3_innerShadow_3305_7117"})),r.createElement("linearGradient",{id:"paint0_linear_3305_7117",x1:14,y1:2.83499,x2:14,y2:14,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.451042,stopColor:"#2072FE"}),r.createElement("stop",{offset:1,stopColor:"#07B4EB"})),r.createElement("linearGradient",{id:"paint1_linear_3305_7117",x1:13.9994,y1:4.00488,x2:13.9994,y2:13.8131,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:.451042,stopColor:"#2072FE"}),r.createElement("stop",{offset:1,stopColor:"#07B4EB"})))),ge=r.forwardRef(fe),_e=K(({handleHistoryItemDelete:n})=>{const{t:i}=N("history"),{store:s}=r.useContext(Y),t={aiModel:"",symbol:"",result:""},[o,a]=r.useState(),[l,c]=r.useState(t),[u,f]=r.useState([]),[d,m]=r.useState(1),[b,w]=r.useState(!0),[L,k]=r.useState(!1),[H,O]=r.useState(!1),B=async(S=!0)=>{if(S&&w(!0),!!s.user.id)try{const g=await lt(s.user.id,S?1:d,10,l),C=g.maxPage===g.page;w(!C),g&&(a(g),S?(m(1),f(g.signals)):(f(T=>T.concat(g.signals)),m(T=>T+1)))}catch{f([])}};r.useEffect(()=>{k(!0),B(!0).finally(()=>k(!1))},[s.user.id,l]),r.useEffect(()=>{O(X(s.user.email))},[s.user.email]);const M=e.jsx("tr",{className:x.noDataRow,children:e.jsx("td",{colSpan:5,children:e.jsx("p",{children:i("history.tableBody.noDataRow")})})}),R=(S,g)=>{c(C=>({...C,[S]:g}))},D=u.length===0?M:u.map((S,g)=>e.jsx(oe,{signalData:S,isAdmin:H,handleHistoryItemDelete:n},g));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:x.tableFiltersWrapper,children:e.jsxs("div",{className:x.filters,children:[e.jsxs("div",{className:x.filtersSelection,children:[e.jsx(P,{type:"aiModel",options:(o==null?void 0:o.availableFilters.aiModels)||[],selectedFilters:l,selectCallback:R}),e.jsx(P,{type:"result",options:(o==null?void 0:o.availableFilters.results)||[],selectedFilters:l,selectCallback:R}),e.jsx(P,{type:"symbol",options:(o==null?void 0:o.availableFilters.symbols)||[],selectedFilters:l,selectCallback:R})]}),e.jsx("button",{className:x.resetButton,onClick:()=>c(t),children:e.jsx("span",{children:i("history.resetBtn")})})]})}),e.jsx("div",{className:x.historyTableWrapper,children:e.jsxs("table",{className:x.historyTable,children:[e.jsx("thead",{children:e.jsxs("tr",{className:x.tableHead,children:[e.jsx("th",{children:i("history.tableHead.symbol")}),e.jsx("th",{children:i("history.tableHead.date")}),e.jsx("th",{children:i("history.tableHead.time")}),e.jsx("th",{children:i("history.tableHead.aiModel")}),e.jsx("th",{children:i("history.tableHead.duration")}),e.jsx("th",{children:i("history.tableHead.result")})]})}),L?e.jsx(rt,{}):e.jsx(kt,{dataLength:u.length,next:()=>B(!1),hasMore:b,loader:u.length>0?e.jsxs("h4",{className:x.bottomTableText,children:[i("history.tableBody.scrollDown")," ",e.jsx(ge,{})]}):null,scrollableTarget:"scrollableDiv",children:e.jsx("tbody",{className:x.tableBody,id:"scrollableDiv",children:D})})]})})]})}),xe="_statsItem_n22eg_1",ye="_infoOpen_n22eg_19",ve="_title_n22eg_23",we="_winRateAmount_n22eg_33",Se="_infoContainer_n22eg_42",be="_closeBtn_n22eg_52",je="_infoImg_n22eg_60",Ce="_infoModal_n22eg_65",Te="_infoModalWrapper_n22eg_78",Ee="_infoRecomendationTitle_n22eg_82",Ne="_infoRecomendationList_n22eg_90",Le="_disclaimerText_n22eg_100",_={statsItem:xe,infoOpen:ye,title:ve,winRateAmount:we,infoContainer:Se,closeBtn:be,infoImg:je,infoModal:Ce,infoModalWrapper:Te,infoRecomendationTitle:Ee,infoRecomendationList:Ne,disclaimerText:Le},Re="./assets/info-XdhPC73H.png",De=({winRate:n})=>{const{t:i}=N("history"),[s,t]=r.useState(!1),o=i("stats.recommendations.list.listContent",{returnObjects:!0}),a=()=>t(!0),l=()=>t(!1);return e.jsx("div",{className:v(_.statsItem,s&&_.infoOpen),children:s?e.jsxs("div",{className:_.infoModal,children:[e.jsx("div",{className:_.closeBtn,onClick:l,children:e.jsx(Q,{})}),e.jsxs("div",{className:_.infoModalWrapper,children:[e.jsxs("h3",{className:_.infoRecomendationTitle,children:[i("stats.recommendations.list.title"),":"]}),e.jsx("ol",{className:_.infoRecomendationList,children:o.map((c,u)=>e.jsx("li",{children:c},u))}),e.jsx("p",{className:_.disclaimerText,children:i("stats.recommendations.disclaimerText")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:_.title,children:"Win rate"}),e.jsx("p",{className:_.winRateAmount,children:n})]}),e.jsx("div",{className:_.infoContainer,onClick:a,children:e.jsx("img",{src:Re,alt:"info",className:_.infoImg})})]})})},Ae={winAmount:0,neutralAmount:0,loseAmount:0,totalSignals:0},Ye=K(()=>{const{store:n}=r.useContext(Y),{t:i}=N("history"),s=tt(),t=et(),[o,a]=r.useState(Ae),[l,c]=r.useState(!1);st(),r.useEffect(()=>{if(!n.user.id){n.logout().then(()=>{s(t("/"))});return}const d=async()=>{try{const m=await ct(n.user.id);m&&a(m)}catch(m){m instanceof nt&&(m==null?void 0:m.status)===401&&n.checkAuth().then(async b=>{b===!1?(await n.logout(),s(t("/"))):d()})}};d()},[n.user.id,l]);const u=()=>o.winAmount===0||o.totalSignals===0?"0%":(o.winAmount*100/o.totalSignals).toFixed(2)+"%",f=()=>{c(d=>!d)};return e.jsxs(ot,{wrapperClassName:j.container,containerClassName:j.sectionContainer,children:[e.jsxs("div",{className:j.topStatsWrapper,children:[e.jsx("h2",{className:j.cardTitle,children:i("stats.title")}),e.jsxs("div",{className:j.statsContainer,children:[e.jsx(Rt,{values:o}),e.jsx(De,{winRate:u()})]})]}),e.jsxs("div",{className:j.tableContainer,children:[e.jsx("h2",{className:j.cardTitle,children:i("history.title")}),e.jsx(_e,{handleHistoryItemDelete:f})]})]})});export{Ye as default};
