import{r as t,j as d,R as $,c as z,F as N}from"./main-CUM0TpEs.js";import{M as D,u as I,P as F,j as K,e as S,L as A,h as P}from"./proxy-B9g5KbkS.js";class H extends t.Component{getSnapshotBeforeUpdate(s){const e=this.props.childRef.current;if(e&&s.isPresent&&!this.props.isPresent){const i=e.offsetParent,f=i instanceof HTMLElement&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=e.offsetHeight||0,o.width=e.offsetWidth||0,o.top=e.offsetTop,o.left=e.offsetLeft,o.right=f-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function U({children:n,isPresent:s,anchorX:e}){const i=t.useId(),f=t.useRef(null),o=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:r}=t.useContext(D);return t.useInsertionEffect(()=>{const{width:h,height:c,top:y,left:a,right:x}=o.current;if(s||!f.current||!h||!c)return;const p=e==="left"?`left: ${a}`:`right: ${x}`;f.current.dataset.motionPopId=i;const u=document.createElement("style");return r&&(u.nonce=r),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${c}px !important;
            ${p}px !important;
            top: ${y}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[s]),d.jsx(H,{isPresent:s,childRef:f,sizeRef:o,children:t.cloneElement(n,{ref:f})})}const G=({children:n,initial:s,isPresent:e,onExitComplete:i,custom:f,presenceAffectsLayout:o,mode:r,anchorX:h})=>{const c=I(V),y=t.useId(),a=t.useCallback(p=>{c.set(p,!0);for(const u of c.values())if(!u)return;i&&i()},[c,i]),x=t.useMemo(()=>({id:y,initial:s,isPresent:e,custom:f,onExitComplete:a,register:p=>(c.set(p,!1),()=>c.delete(p))}),o?[Math.random(),a]:[e,a]);return t.useMemo(()=>{c.forEach((p,u)=>c.set(u,!1))},[e]),t.useEffect(()=>{!e&&!c.size&&i&&i()},[e]),r==="popLayout"&&(n=d.jsx(U,{isPresent:e,anchorX:h,children:n})),d.jsx(F.Provider,{value:x,children:n})};function V(){return new Map}const R=n=>n.key||"";function b(n){const s=[];return t.Children.forEach(n,e=>{t.isValidElement(e)&&s.push(e)}),s}const X=({children:n,custom:s,initial:e=!0,onExitComplete:i,presenceAffectsLayout:f=!0,mode:o="sync",propagate:r=!1,anchorX:h="left"})=>{const[c,y]=K(r),a=t.useMemo(()=>b(n),[n]),x=r&&!c?[]:a.map(R),p=t.useRef(!0),u=t.useRef(a),g=I(()=>new Map),[L,B]=t.useState(a),[C,M]=t.useState(a);S(()=>{p.current=!1,u.current=a;for(let m=0;m<C.length;m++){const l=R(C[m]);x.includes(l)?g.delete(l):g.get(l)!==!0&&g.set(l,!1)}},[C,x.length,x.join("-")]);const j=[];if(a!==L){let m=[...a];for(let l=0;l<C.length;l++){const v=C[l],_=R(v);x.includes(_)||(m.splice(l,0,v),j.push(v))}return o==="wait"&&j.length&&(m=j),M(b(m)),B(a),null}const{forceRender:w}=t.useContext(A);return d.jsx(d.Fragment,{children:C.map(m=>{const l=R(m),v=r&&!c?!1:a===C||x.includes(l),_=()=>{if(g.has(l))g.set(l,!0);else return;let k=!0;g.forEach(W=>{W||(k=!1)}),k&&(w==null||w(),M(u.current),r&&(y==null||y()),i&&i())};return d.jsx(G,{isPresent:v,initial:!p.current||e?void 0:!1,custom:s,presenceAffectsLayout:f,mode:o,onExitComplete:v?void 0:_,anchorX:h,children:m},l)})})},q="_modal_b50nl_1",J="_modalContent_b50nl_28",Q="_closeBtn_b50nl_42",T="_textWrapper_b50nl_51",Y="_text_b50nl_51",E={modal:q,modalContent:J,closeBtn:Q,textWrapper:T,text:Y},ee=({isOpen:n,onClose:s,instructionText:e,children:i,className:f})=>{t.useEffect(()=>(document.body.style.overflow=n?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[n]),t.useEffect(()=>{const r=h=>{h.key==="Escape"&&s()};return n&&document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="auto"}},[n,s]);const o=r=>{r.target===r.currentTarget&&s()};return $.createPortal(d.jsx(X,{children:n&&d.jsx(P.div,{className:E.modal,onClick:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"spring",stiffness:360,damping:20},children:d.jsxs(P.div,{className:z(E.modalContent,f),initial:{y:-20,opacity:0,rotate:-50},animate:{y:0,opacity:1,rotate:0},exit:{y:20,opacity:0,rotate:50},transition:{type:"spring",stiffness:260,damping:20,delay:.4},children:[d.jsx("div",{className:E.closeBtn,onClick:s,children:d.jsx(N,{})}),i||d.jsx("div",{className:E.textWrapper,children:e==null?void 0:e.split(`
`).map((r,h)=>d.jsx("p",{className:E.text,children:r},h))})]})})}),document.getElementById("modal-root"))};export{X as A,ee as I};
