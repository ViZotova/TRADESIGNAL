import{o as v,u as E,r as i,C as T,b,d as I,j as e}from"./main-CUM0TpEs.js";import{Q as S,B as j}from"./react-toastify.esm-BK1xofNY.js";import{M as A}from"./MainButton-CN3kiotW.js";const N="_container_rgf45_1",w="_title_rgf45_15",C="_subtitle_rgf45_24",M="_text_rgf45_34",R="_remainigText_rgf45_44",W="_contentWrapper_rgf45_57",a={container:N,title:w,subtitle:C,text:M,remainigText:R,contentWrapper:W},r=30,l="resentEmailTimer",k=v(()=>{var d;const{t:s}=E("activation"),{store:t}=i.useContext(T),m=b(),g=I(),[_,u]=i.useState(!1),[o,n]=i.useState(r),p=async()=>{localStorage.setItem(l,String(Date.now()+r*1e3)),u(!1),n(r),await t.resendActivationEmail(),j.success(s("sendText"))};return i.useEffect(()=>{const c=setInterval(()=>t.checkAuth({setLoading:!1}),1500);return()=>clearInterval(c)},[]),i.useEffect(()=>{if(t.isAuth&&t.user.isActivated){m(g("/enter-id"));return}const c=localStorage.getItem(l),h=Date.now();if(c){const f=JSON.parse(c)-h;f>0?n(Math.floor(f/1e3)):(n(r),localStorage.setItem(l,String(Date.now()+r*1e3)))}else{n(0),u(!0);return}let x;return o>0?x=setTimeout(()=>{n(o-1)},1e3):(localStorage.removeItem(l),u(!0)),()=>{clearTimeout(x)}},[o,t.isAuth,(d=t==null?void 0:t.user)==null?void 0:d.isActivated,m]),e.jsx("div",{className:a.container,children:e.jsxs("div",{className:a.contentWrapper,children:[e.jsx("h1",{className:a.title,children:s("title")}),e.jsx("p",{className:a.subtitle,children:s("subtitle")}),e.jsx("p",{className:a.text,children:s("text")}),e.jsxs("p",{className:a.remainigText,children:[s("remainigText")," 00:",String(o).padStart(2,"0")]}),e.jsx(A,{category:"button",style:"action",onClick:p,disabled:!_,children:s("button")}),e.jsx(S,{})]})})});export{k as default};
